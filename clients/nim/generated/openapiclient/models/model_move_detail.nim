#
# PokéAPI
# 
# All the Pokémon data you'll ever need in one place, easily accessible through a modern free open-source RESTful API.  ## What is this?  This is a full RESTful API linked to an extensive database detailing everything about the Pokémon main game series.  We've covered everything from Pokémon to Berry Flavors.  ## Where do I start?  We have awesome [documentation](https://pokeapi.co/docs/v2) on how to use this API. It takes minutes to get started.  This API will always be publicly available and will never require any extensive setup process to consume.  Created by [**Paul Hallett**(]https://github.com/phalt) and other [**PokéAPI contributors***](https://github.com/PokeAPI/pokeapi#contributing) around the world. Pokémon and Pokémon character names are trademarks of Nintendo.     
# The version of the OpenAPI document: 2.7.0
# Contact: blah+oapicf@cliffano.com
# Generated by: https://openapi-generator.tech
#

import json
import tables
import marshal
import options

import model_ability_detail_pokemon_inner_pokemon
import model_contest_effect_summary
import model_contest_type_summary
import model_generation_summary
import model_move_change
import model_move_change_effect_entries_inner
import model_move_damage_class_summary
import model_move_detail_contest_combos
import model_move_detail_effect_changes_inner
import model_move_detail_machines_inner
import model_move_detail_stat_changes_inner
import model_move_flavor_text
import model_move_meta
import model_move_name
import model_move_target_summary
import model_super_contest_effect_summary
import model_type_summary

type MoveDetail* = object
  ## 
  id*: int
  name*: string
  accuracy*: Option[int]
  effectChance*: int
  pp*: Option[int]
  priority*: Option[int]
  power*: Option[int]
  contestCombos*: MoveDetail_contest_combos
  contestType*: ContestTypeSummary
  contestEffect*: ContestEffectSummary
  damageClass*: MoveDamageClassSummary
  effectEntries*: seq[MoveChange_effect_entries_inner]
  effectChanges*: seq[MoveDetail_effect_changes_inner]
  generation*: GenerationSummary
  meta*: MoveMeta
  names*: seq[MoveName]
  pastValues*: seq[MoveChange]
  statChanges*: seq[MoveDetail_stat_changes_inner]
  superContestEffect*: SuperContestEffectSummary
  target*: MoveTargetSummary
  `type`*: TypeSummary
  machines*: seq[MoveDetail_machines_inner]
  flavorTextEntries*: seq[MoveFlavorText]
  learnedByPokemon*: seq[AbilityDetail_pokemon_inner_pokemon]


# Custom JSON deserialization for MoveDetail with custom field names
proc to*(node: JsonNode, T: typedesc[MoveDetail]): MoveDetail =
  result = MoveDetail()
  if node.kind == JObject:
    if node.hasKey("id"):
      result.id = to(node["id"], int)
    if node.hasKey("name"):
      result.name = to(node["name"], string)
    if node.hasKey("accuracy") and node["accuracy"].kind != JNull:
      result.accuracy = some(to(node["accuracy"], typeof(result.accuracy.get())))
    if node.hasKey("effect_chance"):
      result.effectChance = to(node["effect_chance"], int)
    if node.hasKey("pp") and node["pp"].kind != JNull:
      result.pp = some(to(node["pp"], typeof(result.pp.get())))
    if node.hasKey("priority") and node["priority"].kind != JNull:
      result.priority = some(to(node["priority"], typeof(result.priority.get())))
    if node.hasKey("power") and node["power"].kind != JNull:
      result.power = some(to(node["power"], typeof(result.power.get())))
    if node.hasKey("contest_combos"):
      result.contestCombos = to(node["contest_combos"], MoveDetail_contest_combos)
    if node.hasKey("contest_type"):
      result.contestType = to(node["contest_type"], ContestTypeSummary)
    if node.hasKey("contest_effect"):
      result.contestEffect = to(node["contest_effect"], ContestEffectSummary)
    if node.hasKey("damage_class"):
      result.damageClass = to(node["damage_class"], MoveDamageClassSummary)
    if node.hasKey("effect_entries"):
      result.effectEntries = to(node["effect_entries"], seq[MoveChange_effect_entries_inner])
    if node.hasKey("effect_changes"):
      result.effectChanges = to(node["effect_changes"], seq[MoveDetail_effect_changes_inner])
    if node.hasKey("generation"):
      result.generation = to(node["generation"], GenerationSummary)
    if node.hasKey("meta"):
      result.meta = to(node["meta"], MoveMeta)
    if node.hasKey("names"):
      result.names = to(node["names"], seq[MoveName])
    if node.hasKey("past_values"):
      # Array of types with custom JSON - manually iterate and deserialize
      let arrayNode = node["past_values"]
      if arrayNode.kind == JArray:
        result.pastValues = @[]
        for item in arrayNode.items:
          result.pastValues.add(to(item, MoveChange))
    if node.hasKey("stat_changes"):
      result.statChanges = to(node["stat_changes"], seq[MoveDetail_stat_changes_inner])
    if node.hasKey("super_contest_effect"):
      result.superContestEffect = to(node["super_contest_effect"], SuperContestEffectSummary)
    if node.hasKey("target"):
      result.target = to(node["target"], MoveTargetSummary)
    if node.hasKey("type"):
      result.`type` = to(node["type"], TypeSummary)
    if node.hasKey("machines"):
      result.machines = to(node["machines"], seq[MoveDetail_machines_inner])
    if node.hasKey("flavor_text_entries"):
      # Array of types with custom JSON - manually iterate and deserialize
      let arrayNode = node["flavor_text_entries"]
      if arrayNode.kind == JArray:
        result.flavorTextEntries = @[]
        for item in arrayNode.items:
          result.flavorTextEntries.add(to(item, MoveFlavorText))
    if node.hasKey("learned_by_pokemon"):
      result.learnedByPokemon = to(node["learned_by_pokemon"], seq[AbilityDetail_pokemon_inner_pokemon])

# Custom JSON serialization for MoveDetail with custom field names
proc `%`*(obj: MoveDetail): JsonNode =
  result = newJObject()
  result["id"] = %obj.id
  result["name"] = %obj.name
  if obj.accuracy.isSome():
    result["accuracy"] = %obj.accuracy.get()
  result["effect_chance"] = %obj.effectChance
  if obj.pp.isSome():
    result["pp"] = %obj.pp.get()
  if obj.priority.isSome():
    result["priority"] = %obj.priority.get()
  if obj.power.isSome():
    result["power"] = %obj.power.get()
  result["contest_combos"] = %obj.contestCombos
  result["contest_type"] = %obj.contestType
  result["contest_effect"] = %obj.contestEffect
  result["damage_class"] = %obj.damageClass
  result["effect_entries"] = %obj.effectEntries
  result["effect_changes"] = %obj.effectChanges
  result["generation"] = %obj.generation
  result["meta"] = %obj.meta
  result["names"] = %obj.names
  result["past_values"] = %obj.pastValues
  result["stat_changes"] = %obj.statChanges
  result["super_contest_effect"] = %obj.superContestEffect
  result["target"] = %obj.target
  result["type"] = %obj.`type`
  result["machines"] = %obj.machines
  result["flavor_text_entries"] = %obj.flavorTextEntries
  result["learned_by_pokemon"] = %obj.learnedByPokemon

